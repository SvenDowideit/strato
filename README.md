# strato

strato is a package manager that builds and distributes packages as container image layers. This means packages can be built entirely with Docker and then distributed by a container registry, such as Docker Hub.

Packages are built using the Docker build process. Only one layer in the resulting image contains the actual "package". This layer is indicated by the presense of a `_package.yml` file in the root of the filesystem. As an example, the following builds and installs musl. Only the final layer, which actually contains the installed musl files, will be installed via strato.

```
FROM ubuntu
RUN apt-get update && apt-get install -y build-essential wget
RUN wget https://www.musl-libc.org/releases/musl-1.1.15.tar.gz
RUN tar xf /musl*
RUN cd /musl* \
    && ./configure --prefix=/usr --sysconfdir=/etc --mandir=/usr/share/man --infodir=/usr/share/info --localstatedir=/var \
    && make
RUN echo '{}' > /_package.yml && cd /musl* && make install
```

After this image is built (`docker build -t user/musl .`) and pushed to Docker Hub (`docker push user/musl`) it can be installed via strato (`strato add user/musl`).

strato works by including only the files generated in a particular container layer. It's completely agnostic to how the package itself is built. This allows packages to be generated by using an existing package manager.

```
FROM alpine
RUN apk update
RUN echo '{}' > /_package.yml && apk add jq
```
